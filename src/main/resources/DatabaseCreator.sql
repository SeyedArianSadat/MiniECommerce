CREATE TABLE CUSTOMER (
                          CUSTOMER_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
                          NAME NVARCHAR2(50) NOT NULL ,
                          FAMILY NVARCHAR2(50) NOT NULL ,
                          EMAIL NVARCHAR2(50),
                          PHONE NVARCHAR2(50)
);
CREATE TABLE PRODUCT (
                         PRODUCT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
                         NAME NVARCHAR2(100) NOT NULL ,
                         PRICE NUMBER(10,2)  NOT NULL ,
                         STOCK NUMBER DEFAULT 0
);
CREATE TABLE ORDERS (
                        ORDER_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
                        CUSTOMER_ID NUMBER NOT NULL ,
                        ORDER_DATE DATE DEFAULT SYSDATE,
                        TOTAL_AMOUNT NUMBER(12,2),
                        CONSTRAINT FK_ORDER_CUSTOMER FOREIGN KEY (CUSTOMER_ID)
                            REFERENCES CUSTOMER(CUSTOMER_ID)
                                ON DELETE CASCADE
);
CREATE TABLE ORDER_ITEM(
                           ITEM_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                           ORDER_ID NUMBER NOT NULL ,
                           PRODUCT_ID NUMBER NOT NULL ,
                           QUANTITY NUMBER DEFAULT 1,
                           PRICE NUMBER(10,2) NOT NULL ,
                           CONSTRAINT FK_ITEM_ORDER FOREIGN KEY (ORDER_ID)
                               REFERENCES ORDERS(ORDER_ID)
                                   ON DELETE CASCADE,
                           CONSTRAINT FK_ITEM_PRODUCT FOREIGN KEY (PRODUCT_ID)
                               REFERENCES PRODUCT(PRODUCT_ID)
);
CREATE TABLE PAYMENT(
                        PAYMENT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                        ORDER_ID NUMBER NOT NULL UNIQUE ,
                        PAYMENT_DATE DATE DEFAULT SYSDATE,
                        AMOUNT NUMBER(12,2),
                        METHOD NVARCHAR2(30),
                        CONSTRAINT FK_PAYMENT_ORDER FOREIGN KEY (ORDER_ID)
                            REFERENCES ORDERS(ORDER_ID)
                                ON DELETE CASCADE
);
CREATE SEQUENCE CUSTOMER_SEQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE PRODUCT_SEQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE ORDER_SEQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE ITEM_SEQ START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE PAYMENT_SEQ START WITH 1 INCREMENT BY 1;